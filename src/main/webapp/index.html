<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
  <title></title>

  <link rel="stylesheet" type="text/css" href="css/console.css"/>
  <!--
    <link rel="stylesheet/less" type="text/css" href="less/console.less"/>
    <script type="text/javascript" src="less-1.3.0.min.js"></script>
  -->

  <script type="text/javascript" src="jquery-1.7.js"></script>
  <script type="text/javascript" src="jquery.console.js"></script>

  <script type="text/javascript">
    $(document).ready(function() {

      // Utility function
      var replLinks = function(text) {
        var exp = /(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/ig;
        return text.replace(exp,"<a href='$1' target='_blank'>$1</a>");
      };

      // Override console filledText to handle our own stuff
      $.fn.filledText = function(txt) {
        $(this).text(txt);
        var html = $(this).html();
        // Line breaks
        html = html.replace(/\n/g,'<br/>');
        // Whitespace
        html = html.replace(/ /g,'&nbsp;');
        // HTML links
        html = replLinks(html);
        $(this).html(html);
        return this;
      };

      // Get welcome message
      $.ajax({
        url: "welcome",
        async: false,
        dataType: "json",
        success : function(data) {
          var controller = $("#console").console({
            promptLabel: data.prompt,
            autofocus: true,
            welcomeMessage : data.welcome + "\n\nType 'help' to show the available commands",
            cols: 80,
            commandHandle: function(line, report) {
              $.ajax({
                url: "execute",
                dataType: "json",
                data: $.param({line: line, width: 80}),
                success: function(data) {
                  var container = $("<div class='jquery-console-message' style='display: inline'></div>");
                  $.each(data, function(index, value) {
                    var chunk = $("<span></span>").filledText(value.text);
                    if (value.fg) {
                      chunk.css('color', value.fg);
                    }
                    if (value.bg) {
                      chunk.css('background-color', value.bg);
                    }
                    container.append(chunk);
                  });
                  report(container)
                },
                error: function(data) {
                  report("an unexpected error occured")
                }
              });
            },
            cancelHandle: function() {
              $.ajax({
                url: "cancel"
              });
            },
            completeHandle: function(prefix) {
              var ret = {};
              $.ajax({
                url: "complete",
                dataType: "json",
                async: false,
                data: $.param({prefix: prefix}),
                success: function(data) {
                  ret = data;
                }
              });
              return ret;
            }
          });
        }
      });
    })
  </script>

</head>
<body>

<div class="navbar navbar-fixed-top">
  <div class="navbar-inner">
    <div class="container">
      <ul id="tabs" class="nav">
        <li><a href="http://vietj.github.com/crash/#home">Home</a></li>
        <li><a href="http://vietj.github.com/crash/#doc">Documentation</a></li>
        <li><a href="http://vietj.github.com/crash/javadoc/index.html" target="_blank">Javadoc</a></li>
        <li><a href="http://crash.vietj.cloudbees.net/">Demo</a></li>
      </ul>
    </div>
  </div>
</div>

<div class="container">

  <div class="center">
    <div id="console" class="console">
    </div>
  </div>

  <hr>
  <footer>
    <p>Sponsored by <a href="http://www.exoplatform.com">eXo Platform</a></p>
  </footer>

</div>


</body>
</html>